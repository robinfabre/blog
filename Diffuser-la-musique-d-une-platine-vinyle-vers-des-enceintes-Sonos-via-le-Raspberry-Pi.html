<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fbfb3b00b-ef8d-464a-b169-436746190c7c%2Ficons8-home-page-100.png?table=collection&amp;id=43400acf-b977-49a1-bbad-916ca0cad551">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>Diffuser la musique d&#39;une platine vinyle vers des enceintes Sonos à l’aide d’un Raspberry Pi&nbsp;|&nbsp;Le Blog de Robin F.</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="Diffuser la musique d&#39;une platine vinyle vers des enceintes Sonos à l’aide d’un Raspberry Pi">
  
    <meta name="description" content="Diffuser la musique d&#39;une platine vinyle vers des enceintes Sonos à l’aide d’un Raspberry Pi">
    <meta property="og:description" content="Diffuser la musique d&#39;une platine vinyle vers des enceintes Sonos à l’aide d’un Raspberry Pi">
  
  
    <meta property="og:image" content="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F95317917-0cd0-4785-9a05-7f13d8e5c578%2Ficons8-sonos-speaker-100.png?table=block&amp;id=cad33ada-a2bc-4cb2-9e23-965431e04268">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fbfb3b00b-ef8d-464a-b169-436746190c7c%2Ficons8-home-page-100.png?table=collection&amp;id=43400acf-b977-49a1-bbad-916ca0cad551"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="cv.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb9ec876c-9408-4df0-b3e0-22cd2072c987%2Ficons8-about-100.png?table=block&amp;id=0405a546-e9c6-49a9-8d6f-6843f2a9d7b9"></span>&nbsp;
          
          <span>Curriculum vitæ</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="support.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F1e1a86af-88dc-4883-8d5f-6562bd8f6c77%2Ficons8-coffee-to-go-96.png?table=block&amp;id=890569db-5250-4cf5-a730-f306445812aa"></span>&nbsp;
          
          <span>Me soutenir</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="social.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F474ed768-73ab-4f73-aeac-5753ff3b9622%2Ficons8-social-network-64.png?table=block&amp;id=331630ca-9957-4ecd-acb4-30bafa1eac23"></span>&nbsp;
          
          <span>Me retrouver ailleurs</span>
        </div>
      </a>
    
  
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F95317917-0cd0-4785-9a05-7f13d8e5c578%2Ficons8-sonos-speaker-100.png?table=block&amp;id=cad33ada-a2bc-4cb2-9e23-965431e04268"></span>
      </div>
    
    <h1 class="Header__Title">Diffuser la musique d&#39;une platine vinyle vers des enceintes Sonos à l’aide d’un Raspberry Pi</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Tue, Apr 13, 2021</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--orange">
            <a href="tag/Raspberry.html">Raspberry</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--pink">
            <a href="tag/Pi.html">Pi</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--green">
            <a href="tag/Tuto.html">Tuto</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--blue">
            <a href="tag/Sonos.html">Sonos</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--blue">
            <a href="tag/Musique.html">Musique</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/cad33adaa2bc4cb29e23965431e04268" class="PageRoot"><div id="https://www.notion.so/d52b09be3fb744a58ec21e8e2c4f8b9e" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4b39d7c0-391e-4f3a-afae-88c8996cd00c%2FUntitled.jpeg?width=864&amp;table=block&amp;id=d52b09be-3fb7-44a5-8ec2-1e8e2c4f8b9e"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4b39d7c0-391e-4f3a-afae-88c8996cd00c%2FUntitled.jpeg?width=864&amp;table=block&amp;id=d52b09be-3fb7-44a5-8ec2-1e8e2c4f8b9e" style="width:864px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/591f304190eb42aebbd5c614ee9da9eb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Pour éviter d’investir dans un Sonos Port à 449€, j’ai tenté de trouver comment mettre à contribution l’un des mes Raspberry Pi pour diffuser le son de ma platine vinyle vers ma Sonos Beam.</span></span></p></div><div id="https://www.notion.so/ffe4ee73548a4636b097746716e3bd57" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Pour cela, j’utilise la sortie USB de ma platine vinyle que je vais connecter à un port du Raspberry Pi.</span></span></p></div><h1 id="https://www.notion.so/7bd2c4b08abf46d9b6877ac2c4c87ba0" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/7bd2c4b08abf46d9b6877ac2c4c87ba0"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">1. Installation de Raspbian sur la carte SD</span></span></h1><div id="https://www.notion.so/1bfba27637724d3084e76c8a26feda01" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Dans mon cas, j’ai utilisé la dernière version de Raspbian pour le Raspberry Pi4.</span></span></p></div><div id="https://www.notion.so/24be5931f1e34f5b99aa7fd69650dccb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Il est aussi possible d’utiliser la version de Raspbian Lite si on dédie un raspberry uniquement à cet usage.</span></span></p></div><div id="https://www.notion.so/5255668c5b7344bc82136761287ae1a9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Pour le tutoriel d’installation de Raspbian, je vous conseille de suivre celui du site officiel : </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.raspberrypi.org/documentation/installation/installing-images/README.md">https://www.raspberrypi.org/documentation/installation/installing-images/README.md</a></span></span></p></div><h1 id="https://www.notion.so/bf86a5b8ad32483db2d63f83be9b058e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/bf86a5b8ad32483db2d63f83be9b058e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">2. Connecter la platine vinyle au Raspberry</span></span></h1><div id="https://www.notion.so/44c92188f4f243a2ae8d037e009766ea" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Une fois que votre Raspberry est opérationnel, connectez la platine à l’un des ports USB puis lancez le terminal. Utilisez la commande </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">arecord -l</code></span><span class="SemanticString"> pour vérifier si votre appareil est détecté :</span></span></p></div><pre id="https://www.notion.so/c839555a7f97470ca8b75a85e5bab5d0" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>**** Liste des Périphériques Matériels CAPTURE ****carte 1: CODEC [USB AUDIO  CODEC], périphérique 0: USB Audio [USB Audio]  Sous-périphériques: 0/1  Sous-périphérique #0: subdevice #0
</span></span></span></code></pre><div id="https://www.notion.so/43a2d22765824ec7b00e5e4d2acccf56" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Retenez bien le numéro de la carte, </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">1</code></span><span class="SemanticString"> dans mon cas. Vous aurez probablement le même mais on ne sait jamais.</span></span></p></div><h1 id="https://www.notion.so/2fe99f27db7d479a9773eeed3de364e2" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/2fe99f27db7d479a9773eeed3de364e2"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">3. Anticiper les problèmes de volume</span></span></h1><div id="https://www.notion.so/36fb59f181384edea98003d475da97ec" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">La plupart des platine vinyle USB n’ont pas de réglage du volume et la sortie audio est souvent “bridée”. Nous allons donc rajouter un contrôle du volume.</span></span></p></div><div id="https://www.notion.so/778d93aa196c44f198298a36357437ed" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Pour cela, nous créons le fichier </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">/etc/asound.conf</code></span><span class="SemanticString"> (avec la commande </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">sudo nano /etc/asound.conf</code></span><span class="SemanticString">) et nous lui mettons le contenu suivant :</span></span></p></div><pre id="https://www.notion.so/1b612e4a83c849499a4da5f21cdb7aac" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>pcm.dmic_hw {    type hw    card 1    channels 2    format S16_LE}pcm.dmic_mm {    type mmap_emul    slave.pcm dmic_hw}pcm.dmic_sv {    type softvol    slave.pcm dmic_hw    control {        name &quot;Boost Capture Volume&quot;        card 1    }    min_dB -5.0    max_dB 20.0}
</span></span></span></code></pre><div id="https://www.notion.so/647c34a52b2441df8e424aa79adb19af" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">On sauvegarde le fichier avec ctrl+X suivi de O.</span></span></p></div><div id="https://www.notion.so/5adb744a13404c8b9eb5bdebde354e5b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Ensuite on lance la commande suivante pour recharger l’état d’alsa et nous affichons le test de volume :</span></span></p></div><pre id="https://www.notion.so/f8b07c48c8e74fc896b8f1b4950335d5" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>arecord -D dmic_sv -r 44100 -f S16_LE -c 2 --vumeter=stereo /dev/null
</span></span></span></code></pre><div id="https://www.notion.so/df3e0ed5a9584497be1ff54fae76914b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Dans mon cas ces paramètres étaient suffisants mais il possible d’utiliser </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">alsamixer</code></span><span class="SemanticString"> pour affiner les réglages si le volume est trop bas.</span></span></p></div><h1 id="https://www.notion.so/d910c4608982474898c65fe9864db787" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/d910c4608982474898c65fe9864db787"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">4. Installation de Darkice</span></span></h1><div id="https://www.notion.so/7e8f99c0d4704ac4a5b46097449096fe" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Exécutez les commandes suivantes :</span></span></p></div><pre id="https://www.notion.so/10402cf9fc6f46c99380aad46ca1850a" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>sudo apt-get install libmp3lame0 libtwolame0wget &lt;https://github.com/basdp/USB-Turntables-to-Sonos-with-RPi/raw/master/darkice_1.0.1-999_mp3%2B1_armhf.debsudo&gt; dpkg -i darkice_1.0.1-999_mp3+1_armhf.debsudo apt-get install -f
</span></span></span></code></pre><h1 id="https://www.notion.so/78a0bbdf6cb84715986229ad08ed239b" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/78a0bbdf6cb84715986229ad08ed239b"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">5. Installation de Icecast</span></span></h1><pre id="https://www.notion.so/e184e560353a47b2b5d4a4dda73c4794" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>sudo apt-get install icecast2
</span></span></span></code></pre><div id="https://www.notion.so/830383e6fbe94fc4b27f278059da9af9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Sélectionnez </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Yes</code></span><span class="SemanticString"> pour configurer Icecast. Vous pouvez si vous le souhaitez laisser tous les paramètres par défaut mais je vous conseille quand même de changer le mot de passe.</span></span></p></div><h1 id="https://www.notion.so/e0c886ac05784e27a96af7215adfb4a4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/e0c886ac05784e27a96af7215adfb4a4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">6. Configurer Darkice</span></span></h1><div id="https://www.notion.so/d9f631c51f2b485cacb3f12979ab206d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Darkice va être le logiciel qui va enregistrer le son qui arrive de la platine vinyle via le port USB et va le transformer au format mp3.</span></span></p></div><div id="https://www.notion.so/c16ef0d090a544b7a2657464c353cf5e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Pour le configurer, il faut créer le fichier </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">/etc/darkice.cfg</code></span><span class="SemanticString"> (avec la commande </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">sudo nano /etc/darkice.cfg</code></span><span class="SemanticString">) et le remplir avec les éléments suivants:</span></span></p></div><pre id="https://www.notion.so/706a087f48db457e9563c5057d944793" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>[general]duration        = 0      # duration in s, 0 foreverbufferSecs      = 1      # buffer, in secondsreconnect       = yes    # reconnect if disconnected[input]device          = dmic_sv # Soundcard device for the audio inputsampleRate      = 44100   # sample rate 11025, 22050 or 44100bitsPerSample   = 16      # bitschannel         = 2       # 2 = stereo[icecast2-0]bitrateMode     = cbr       # constant bit rate (&#x27;cbr&#x27; constant, &#x27;abr&#x27; average)#quality         = 1.0       # 1.0 is best quality (use only with vbr)format          = mp3       # format. Choose &#x27;vorbis&#x27; for OGG Vorbisbitrate         = 320       # bitrateserver          = localhost # or IPport            = 8000      # port for IceCast2 accesspassword        = raspberry    # source password for the IceCast2 servermountPoint      = turntable.mp3  # mount point on the IceCast2 server .mp3 or .oggname            = Turntablehighpass        = 18lowpass         = 20000description = Turntable
</span></span></span></code></pre><div id="https://www.notion.so/7417d9d1a35646a6ae579b2a18171690" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Attention à bien mettre mot de passe utilisé lors de l’installation de icecast à la ligne password (ici raspberry est celui par défaut).</span></span></p></div><h1 id="https://www.notion.so/ccc7af3f9bfb4e92901b4cb0604c8e11" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/ccc7af3f9bfb4e92901b4cb0604c8e11"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">7. Lancement automatique de Darkice</span></span></h1><pre id="https://www.notion.so/b7e8d8e4578a4f50b76273d9614eef29" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>wget &lt;https://raw.githubusercontent.com/basdp/USB-Turntables-to-Sonos-with-RPi/master/init.d-darkicesudo&gt; mv init.d-darkice /etc/init.d/darkicesudo chmod 777 /etc/init.d/darkicesudo update-rc.d darkice defaults
</span></span></span></code></pre><h1 id="https://www.notion.so/83f23d6188a74391b7b9dc94d67696c7" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/83f23d6188a74391b7b9dc94d67696c7"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">8. Vérifier si le streaming fonctionne</span></span></h1><div id="https://www.notion.so/e763ea9ed9e94e70be4a16822a1110c8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Redémarrez le Raspberry Pi dans le but de vérifier que tout fonctionne correctement (commande </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">sudo reboot</code></span><span class="SemanticString"> dans le terminal).</span></span></p></div><div id="https://www.notion.so/a27a81f9b1db4350b54df3c5555a01e1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Une fois que le Raspberry à redémarré, lancé votre navigateur et connectez-vous à l’adresse suivante : </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">[&lt;http://ipDuRaspberry:8000&gt;](&lt;http://ipDuRaspberry:8000&gt;.)</code></span><span class="SemanticString">[.](</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="http://ipduraspberry:8000/">http://ipDuRaspberry:8000</a></span><span class="SemanticString">.)</span></span></p></div><div id="https://www.notion.so/68e4e4d97f5548f8a09c4a8f82ae30a6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Pour récupérer le lien de streaming, il vous suffit de faire un clic droit sur le lien M3U et de copier l’adresse du lien.</span></span></p></div><div id="https://www.notion.so/8894f39d373e43d5b4f97736042f5ed0" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F19cea780-af55-45f7-b9ac-e589a65ea489%2Fdarkrice.gif?width=1423&amp;table=block&amp;id=8894f39d-373e-43d5-b4f9-7736042f5ed0"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F19cea780-af55-45f7-b9ac-e589a65ea489%2Fdarkrice.gif?width=1423&amp;table=block&amp;id=8894f39d-373e-43d5-b4f9-7736042f5ed0" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/9178eb3784b9407a9cd763261e4f55b0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/853e601f63a04a6f94bccb383edeff33" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Ensuite pour faire un test, lancez un vinyle sur votre platine puis ouvrez VLC et allez dans :</span></span></p></div><div id="https://www.notion.so/b68a6d0c5f544d3ab292e49093ce1282" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Fichier &gt; Ouvir un flux réseau...</code></span></span></p></div><div id="https://www.notion.so/0f8bf1040b1d4de796ca95c4dce46e37" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Puis collez l’adresse du lien M3U.</span></span></p></div><div id="https://www.notion.so/b50427342f744ddfbbece676285e3f93" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Si tout a marché, vous devriez être en mesure d’entendre la musique via VLC.</span></span></p></div><h1 id="https://www.notion.so/7e58d5fe06ef44dab83acadaad61a913" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/7e58d5fe06ef44dab83acadaad61a913"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">9. Ajouter le stream à votre installation Sonos.</span></span></h1><div id="https://www.notion.so/6c2385e1d4fd4000999f1fb2b670cbb6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/20f85daad52f4e50b38f1bef8ec9ca9f" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F529137e2-6df5-4009-923d-96db8291857c%2Fsonos.png?width=1200&amp;table=block&amp;id=20f85daa-d52f-4e50-b38f-1bef8ec9ca9f"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F529137e2-6df5-4009-923d-96db8291857c%2Fsonos.png?width=1200&amp;table=block&amp;id=20f85daa-d52f-4e50-b38f-1bef8ec9ca9f" style="width:1200px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/4e65280046494884bbc30d7e5e01f698" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F2af6db92-de4b-4898-869b-75335f1225a5%2Fsonos2.png?width=624&amp;table=block&amp;id=4e652800-4649-4884-bbc3-0d7e5e01f698"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F2af6db92-de4b-4898-869b-75335f1225a5%2Fsonos2.png?width=624&amp;table=block&amp;id=4e652800-4649-4884-bbc3-0d7e5e01f698" style="width:624px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/ac7ac5b14c454f3097e56062df75b058" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/0b9379758e724f4a9ffd5e963b5aabc2" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fe4059eb2-46d9-42ab-a9ed-082a4658ecea%2FsonosApp.png?width=480&amp;table=block&amp;id=0b937975-8e72-4f4a-9ffd-5e963b5aabc2"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fe4059eb2-46d9-42ab-a9ed-082a4658ecea%2FsonosApp.png?width=480&amp;table=block&amp;id=0b937975-8e72-4f4a-9ffd-5e963b5aabc2" style="width:480px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/95f9c13002ab4a119a999f95f9b67268" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Pour ce faire, il vous faut obligatoirement la version de bureau de l’application Sonos (impossible de le faire sur la version mobile). Dans l’application Sonos allez dans </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Gérer &gt; Ajouter une station de radio...</code></span><span class="SemanticString"> et collez l’adresse du lien M3U dans la partie URL du flux puis donnez un titre à votre station (la mienne s’appelle Vinyle).</span></span></p></div><div id="https://www.notion.so/30e03ccf62da4253b60eb931db28e12e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">alt Pour jouer la musique sur votre enceinte Sonos, il vous suffit d’aller ensuite dans </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Radio via TuneIn &gt; Mes stations de radio</code></span><span class="SemanticString"> puis de double cliquer sur le nom de la station (je vous conseille aussi de faire un </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">clic droit &gt; Ajouter au favoris Sonos</code></span><span class="SemanticString">).</span></span></p></div><div id="https://www.notion.so/f9b43a2de60443a38cdeb2e0d7e6ba7f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">À partir de là, vous devriez être en mesure d’entendre le son de la platine sur votre enceinte Sonos. Si vous avez rajouté la station à vos favoris, vous pourrez aussi lancer le streaming via l’application mobile.</span></span></p></div><h1 id="https://www.notion.so/eb38d42a2d224601aaeea22a01c07aad" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/eb38d42a2d224601aaeea22a01c07aad"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Source</span></span></h1><div id="https://www.notion.so/f268ed04b6564c7a9caaa20bf982ea53" class="Bookmark"><a href="https://github.com/basdp/USB-Turntables-to-Sonos-with-RPi/blob/master/README.md"><h5 class="Bookmark__Title">USB-Turntables-to-Sonos-with-RPi/README.md at master · basdp/USB-Turntables-to-Sonos-with-RPi</h5><p class="Bookmark__Desc">Sonos support for USB Turntables with Raspberry Pi - USB-Turntables-to-Sonos-with-RPi/README.md at master · basdp/USB-Turntables-to-Sonos-with-RPi</p><p class="Bookmark__Link">https://github.com/basdp/USB-Turntables-to-Sonos-with-RPi/blob/master/README.md</p></a></div></article>
  <footer class="Footer">
  <div>&copy; Le Blog de Robin F. 2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>, <a href="https://icons8.com/" target="_blank"
      rel="noopener noreferrer">icons8</a>.
  </div>
</footer>
</body>

</html>